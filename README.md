# db-test
В запросе /flights делается селект из view "flightentityview", в котором есть еще join с другим view, 
в котором есть еще join. Много лишних join'ов, которые замедляют работу. Также, для каждого найденного полета
делается отдельный селект планеты, в котором, опять же, присутствует join с view.
Для каждого полета делается отдельный селект, хотя можно просто обойтись одним селектом с одним join'ом.
    
Кэш не обновлялся при удалении/обновлении сущностей (учитывая, что при удалении планеты удаляются все полеты на нее)

Более того, сущности не обновлялись/удалялись, из-за autoCommit=false и не где не вызывался метод `java.sql.Connection.commit` 

Не ясно зачем одновременно нужно работать и entityManager'ом и с более низкоуровневой абстракцией в виде коннектов

Насколько я поняла, entityManager не использовал hikari, т е он создавался в начале жизни приложения,
создавал один коннект и так все время и жил с ним. Это может негативно сказаться в случае большого числа
 одновременных запросов на незакэшированные сущности, ну и при этом должно быть довольно много данных.
 
 Честно не поняла зачем иногда мы хотим взаимодействовать с БД через hikari пул, а иногда нет.
 
 
 
   